---
# defaults for grafana-agent

agent_version: "0.17.0"
agent_arch: amd64
agent_url: "https://github.com/grafana/agent/releases/download/v{{ agent_version }}/grafana-agent-{{ agent_version }}-1.{{ agent_arch }}.deb"

agent_config:
  server:
    http_listen_address: '127.0.0.1'
    http_listen_port: 9099
    grpc_listen_address: '127.0.0.1'
    grpc_listen_port: 19095
  prometheus:
    global:
      scrape_interval: 15s
      remote_write:
        - url: http://cortex.service.consul:9009/api/v1/push
    wal_directory: '/var/lib/grafana-agent'
    configs:
    - name: agent
      host_filter: false
      scrape_configs:
        - job_name: agent
          static_configs:
            - targets: ['127.0.0.1:9099']
  integrations:
    agent:
      enabled: true
    node_exporter:
      enabled: true
      include_exporter_metrics: true
      disable_collectors:
        - "mdadm"
    consul_exporter:
      enabled: true
